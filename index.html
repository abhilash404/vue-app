<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <title>Document</title>
</head>
<body>
    <div id="app" class="container">
        <div class="bg-info p-5 rounded m-5">
            <div class="h2 text-center">vue padhle bhai</div>
            <hr />
            <div class="input-group mb-3">
                <span class="input-group-text">Title</span>
                <input type="text" class="form-control" 
                v-model="newMovieTitle" >
            </div>
            <div class="input-group mb-3">
                <span class="input-group-text">Rating</span>
                <input type="text" class="form-control" 
                v-model="rating">
            </div>
            <div class="text-center pb-3">
                <button class="btn btn-secondary m-2 w-25" v-on:click="add">Add Movie</button>
                <button class="btn btn-danger m-2 w-25" v-on:click="remove">Remove Movie</button>
            </div>
            <div class="border p-3 w-50 mx-auto">
                <div class="text-center">
                    <h4 class="text-center"> Movie List</h4>
                    <span v-if="flag">
                        only 5 movies are allowed
                    </span>
                    <hr />
                </div>
                <ul class="list-group">
                    <li v-for="movie in getAllmovies()" class="list-group-item">
                        {{ movie }}
                    </li>
            </div>
        </div>
    </div>
    
    <script>
        const { createApp, ref, reactive, computed, watch } = Vue;
            

        createApp({
            
            setup() {
                let movies = reactive([
                    { title: "Inception", rating: 8.8 },
                    { title: "The Dark Knight", rating: 9.0 },
                    { title: "Interstellar", rating: 8.6 },
                    { title: "Parasite", rating: 8.6 },
                    { title: "The Godfather", rating: 9.2 }
                ]);
                let rating = ref(0);
                let newMovieTitle = ref("enter title");
                const MAX = 5;
                let flag = ref(movies.length >= MAX);
                function add(){
                    if(movies.length < MAX){
                        movies.push({ title: newMovieTitle.value, rating: rating.value });
                    } else {
                        alert("Cannot add more than " + MAX + " movies.");
                    }
                };

                function remove(){
                    movies.pop();
                };

                function getAllmovies(){
                    return  movies.map((movie) =>{
                        return `${movie.title} has a Rating: ${movie.rating}`;
                    })
                }


                


                watch(
                    () => movies.length,
                    (n) => {
                        flag.value = n >= 3;

                    }   
                )
                
                
                
                return { movies, add, rating, newMovieTitle, remove, getAllmovies, flag};
            }
        }).mount("#app");
    </script>
</body>
</html>